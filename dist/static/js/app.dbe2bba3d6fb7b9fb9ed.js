webpackJsonp([0],{"5Vpr":function(t,e){},"5bEs":function(t,e){},AliO:function(t,e){},BRy7:function(t,e){},DRGz:function(t,e){},E51W:function(t,e){},Fkrr:function(t,e){},GCLf:function(t,e){},HB9E:function(t,e){},KzDn:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view"),t._v(" "),s("mu-popup",{attrs:{position:"top",popupClass:"popup-top",overlay:!1,open:t.$store.state.isShowTopPopup}},[t._v(t._s(t.$store.state.tipText))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.loading,expression:"$store.state.loading"}],staticClass:"loading-shade"},[t._m(0)]),t._v(" "),s("mu-dialog",{attrs:{open:t.$store.state.isShowAlert,title:"提示"}},[t._v("\n    "+t._s(t.$store.state.alertText)+"\n    "),s("mu-flat-button",{attrs:{slot:"actions",label:"确定",primary:""},nativeOn:{click:function(e){t.$store.state.isShowAlert=!1}},slot:"actions"})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-box"},[e("embed",{attrs:{src:"static/svg/loading.svg",type:"image/svg+xml",pluginspage:"http://www.adobe.com/svg/viewer/install/"}})])}]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("5Vpr")},null,null).exports,o=s("/ocq"),r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hello"},[s("h1",[t._v(t._s(t.msg))]),t._v(" "),s("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),s("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),s("br"),t._v(" "),s("li",[s("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};s("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},r,!1,function(t){s("Fkrr")},"data-v-694cd902",null).exports;var c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index-page"},[s("router-view",{staticClass:"index-tab-view"}),t._v(" "),s("footer",{staticClass:"footer-bar"},[s("mu-tabs",{attrs:{value:t.activeTab,lineClass:"activeline"},on:{change:t.handleTabChange}},[s("mu-tab",{attrs:{value:"wallet",href:"javascript:;",title:"个人"},nativeOn:{click:function(e){t.switchTo("wallet")}}},[s("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),s("mu-tab",{attrs:{value:"chatlist",href:"javascript:;",title:"聊天"},nativeOn:{click:function(e){t.switchTo("chatlist")}}},[s("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),s("mu-tab",{attrs:{value:"setting",href:"javascript:;",title:"设置"},nativeOn:{click:function(e){t.switchTo("setting")}}},[s("i",{staticClass:"iconfont"},[t._v("")])])],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")({data:function(){return{activeTab:this.$route.name}},mounted:function(){},methods:{handleTabChange:function(t){this.activeTab=t},loginOut:function(){this.$router.replace("login")},switchTo:function(t){this.$router.replace(t)}},watch:{$route:function(t,e){this.activeTab="addchat"==t.name?"chatlist":t.name}}},c,!1,function(t){s("puqK")},null,null).exports,u=s("TQvf"),m=s.n(u),d={data:function(){return{userid:sessionStorage.getItem("userid")||"",toast:!1,toastMessage:"",pageData:null,timestamp:""}},mounted:function(){this.getData()},methods:{copy:function(){var t=this,e=new m.a(".tag-read");e.on("success",function(s){t.toastMessage="复制成功",t.toast=!0,setTimeout(function(){t.toast=!1},1e3),e.destroy()}),e.on("error",function(s){t.toastMessage="该浏览器不支持自动复制",t.toast=!0,setTimeout(function(){t.toast=!1},1e3),e.destroy()})},getData:function(){var t=this;this.timestamp=(new Date).getTime(),this.$store.commit("WSsend",{data:{method:"getTariffPackages",params:[this.userid,this.timestamp]},callback:function(e){if(200==e.code&&"getTariffPackages"==e.method){if(e.serial!=t.timestamp)return;t.pageData=e}}})},buy:function(t){var e=this;this.timestamp=(new Date).getTime(),this.$store.commit("WSsend",{data:{method:"buyTariffPackages",params:[this.userid,t,this.timestamp]},callback:function(t){if(200==t.code&&"buyTariffPackages"==t.method){if(t.serial!=e.timestamp)return;console.log(t),console.log(1111),"OK"==t.result?(e.$store.commit("showAlert","购买成功"),e.getData()):window.location.href=t.result.payUrl}}})}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wallet-page"},[s("div",{staticClass:"main"},[s("div",{staticClass:"menu"},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),s("div",{staticClass:"content"},[s("label",[t._v("您的地址")]),t._v(" "),s("p",[t._v(t._s(t.userid))])]),t._v(" "),s("mu-raised-button",{staticClass:"tag-read",attrs:{label:"复制","data-clipboard-text":t.userid},nativeOn:{click:function(e){return t.copy(e)}}})],1),t._v(" "),s("p",{staticClass:"tip"},[t._v("把地址发给他人，他人即可通过密聊发送相应的信息到您的地址")]),t._v(" "),t.pageData?s("div",{staticClass:"menu"},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"balance"},[s("span",[t._v(t._s(t.pageData.balance))]),t._v("条")])]):t._e(),t._v(" "),t.pageData?s("ul",{staticClass:"combo-list"},t._l(t.pageData.result,function(e){return s("li",[s("label",[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"content"},[t._v(t._s(e.memo))]),t._v(" "),0==e.amount?s("mu-raised-button",{attrs:{label:"限时免费"},nativeOn:{click:function(s){t.buy(e.pack_id)}}}):t._e(),t._v(" "),0!=e.amount?s("mu-raised-button",{attrs:{label:e.amount+"SAC"},nativeOn:{click:function(s){t.buy(e.pack_id)}}}):t._e()],1)})):t._e(),t._v(" "),s("div",{staticClass:"flex-wrap"},[s("p",{staticClass:"tip no-border"},[t._v("备注：您充值的sac，一部分是以太坊公网收取的，一部分是我们的运营开发费用。")]),t._v(" "),s("i",{staticClass:"iconfont",on:{click:function(e){t.$router.push("specification")}}},[t._v("")])]),t._v(" "),t.toast?s("mu-toast",{staticClass:"tipbox",attrs:{message:t.toastMessage}}):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("label",[this._v("您的余额")])])}]};var h=s("VU/8")(d,p,!1,function(t){s("KzDn")},null,null).exports,v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-list-page"},[s("div",{staticClass:"main"},[s("div",{staticClass:"add-chat",on:{click:function(e){t.$router.push("addchat")}}},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),s("div",{staticClass:"content"},[t._v("开始新的聊天")]),t._v(" "),s("div",{staticStyle:{display:"none"}},[t._v(t._s(t.changeM))])]),t._v(" "),s("ul",t._l(t.chatListData,function(e,a){return s("li",{key:a,on:{click:function(s){t.$router.push({path:"chatin",query:{id:e.userid}})}}},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),s("div",{staticClass:"content"},[s("div",[s("h3",[t._v(t._s(e.userid))]),t._v(" "),s("span",[t._v("今天12:12")])]),t._v(" "),s("p",[t._v(t._s(e.list[e.list.length-1].message))])])])}))])])},staticRenderFns:[]};var f=s("VU/8")({data:function(){return{}},computed:{chatListData:function(){return this.$store.state.chatUserList},changeM:function(){return this.$store.state.changeM}}},v,!1,function(t){s("HB9E")},null,null).exports,g={data:function(){return{}},methods:{logout:function(){var t=sessionStorage.getItem("userid");this.$store.commit("WSsend",{data:{method:"logout",params:[t]}})}},computed:{storeMinute5logout:function(){return this.$store.state.minute5logout}},watch:{storeMinute5logout:function(t,e){var s=this;t&&(this.$store.state.timer=setTimeout(function(){s.$store.state.minute5logout=!1;var t=sessionStorage.getItem("userid");s.$store.commit("WSsend",{data:{method:"logout",params:[t]}})},3e5))}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"set-page"},[s("div",{staticClass:"main"},[s("ul",[s("li",[s("h3",[t._v("安全")]),t._v(" "),s("div",{staticClass:"content"},[s("mu-checkbox",{staticClass:"demo-checkbox",attrs:{label:"5分钟后，自动退出应用，退出后，需要重新输入匿名账户（12个英文字母）"},model:{value:t.$store.state.minute5logout,callback:function(e){t.$set(t.$store.state,"minute5logout",e)},expression:"$store.state.minute5logout"}})],1)])]),t._v(" "),s("mu-raised-button",{staticClass:"logout-btn",attrs:{label:"安全退出",fullWidth:"",primary:""},nativeOn:{click:function(e){return t.logout(e)}}}),t._v(" "),t._m(0)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"other-test-info"},[this._v("您所有的聊天，都是通过区块链浏览器加密，不会储存在第三方平台。"),e("br"),e("br"),this._v("您只要保存好您的密钥和匿名账户，您的隐私就可以得到保护。如果有人想恶意破解您的聊天，以目前计算机的能力，需要算好几百亿年。"),e("br"),e("br"),this._v("您可以去以太坊的区块链浏览器查询您的相关浏览记录，您的所有信息，都会加密上链。"),e("br"),e("br"),this._v("我们第一期放在以太坊公链上，您可以登录以太坊的区块链浏览器查看，以太坊是全球公认的区块链技术，并且用户众多，要想在这个网络作弊，需要说服51%的用户。")])}]};var b=s("VU/8")(g,_,!1,function(t){s("5bEs")},null,null).exports,k={data:function(){return{message:"",to_user_id:"",topPopup:!1,tipText:"",keyPair1:"",keyPair2:"",nonce:"",timestamp:""}},mounted:function(){},methods:{getUserInfo:function(){var t=this;""!=this.to_user_id.trim()?""!=this.message.trim()?(this.$store.state.loading=!0,this.timestamp=(new Date).getTime(),this.$store.commit("WSsend",{data:{method:"getUserInfo",params:[this.to_user_id,this.timestamp]},callback:function(e){if(console.log(1111),e.serial&&200===e.code&&"getUserInfo"==e.method){if(e.serial!=t.timestamp)return;t.timestamp=(new Date).getTime(),t.send(e.result[0].pub_key)}}})):this.$store.commit("showTopPopup","发送内容不能为空"):this.$store.commit("showTopPopup","对方地址不能为空")},send:function(t){var e=this,s=nacl.randomBytes(nacl.secretbox.nonceLength),a=nacl.util.encodeBase64(s),i=localStorage.getItem("sec_key"),n=nacl.box(nacl.util.decodeUTF8(this.message),s,nacl.util.decodeBase64(t),nacl.util.decodeBase64(i)),o=sessionStorage.getItem("userid");this.$store.commit("WSsend",{data:{method:"postMessage",params:[o,this.to_user_id,1,nacl.util.encodeBase64(n),a,this.timestamp]},callback:function(s){if(200===s.code&&"postMessage"==s.method){if(!s.serial)return;if(s.serial!=e.timestamp)return;e.timestamp=(new Date).getTime(),console.log("addchat"),e.$store.commit("addChatUser",{userid:e.to_user_id,list:[{message:e.message,self:!0}],pk:t}),e.$router.replace({path:"chatin",query:{id:e.to_user_id}})}}})}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"add-chat-page"},[s("div",{staticClass:"main"},[s("mu-text-field",{attrs:{label:"对方地址",labelFloat:""},model:{value:t.to_user_id,callback:function(e){t.to_user_id=e},expression:"to_user_id"}}),t._v(" "),s("mu-text-field",{attrs:{hintText:"输入您的信息",multiLine:"",rows:1,rowsMax:10},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),s("mu-raised-button",{attrs:{label:"发送",primary:"",fullWidth:""},nativeOn:{click:function(e){return t.getUserInfo(e)}}}),t._v(" "),s("mu-popup",{attrs:{position:"top",popupClass:"popup-top",overlay:!1,open:t.topPopup}},[t._v(t._s(t.tipText))])],1)])},staticRenderFns:[]};var C=s("VU/8")(k,w,!1,function(t){s("GCLf")},"data-v-06ca72a3",null).exports,T={data:function(){return{messageText:"",timestamp:""}},updated:function(){this.scrollBottom()},mounted:function(){console.log(this.chatListData),this.scrollBottom()},methods:{sendMessage:function(){var t=this;if(""!=this.messageText.trim()){var e=this.$route.query.id,s=this.$store.state.chatUserList[e].pk,a=nacl.randomBytes(nacl.secretbox.nonceLength),i=nacl.util.encodeBase64(a),n=localStorage.getItem("sec_key"),o=nacl.box(nacl.util.decodeUTF8(this.messageText),a,nacl.util.decodeBase64(s),nacl.util.decodeBase64(n)),r=sessionStorage.getItem("userid");this.timestamp=(new Date).getTime(),this.$store.commit("WSsend",{data:{method:"postMessage",params:[r,e,1,nacl.util.encodeBase64(o),i,this.timestamp]},callback:function(a){if(200===a.code&&"postMessage"==a.method){if(!a.serial)return;if(a.serial!=t.timestamp)return;t.timestamp=(new Date).getTime(),console.log("chatin"),t.$store.commit("addChatUser",{userid:e,list:[{message:t.messageText,self:!0}],pk:s}),t.messageText=""}}})}else this.$store.commit("showTopPopup","发送内容不能为空")},scrollBottom:function(){this.$refs.main&&(this.$refs.main.scrollTop=this.$refs.main.scrollHeight)}},computed:{chatListData:function(){return this.$store.state.chatUserList},changeM:function(){return this.$store.state.changeM}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-in-page"},[s("mu-appbar",{staticClass:"header"},[s("i",{staticClass:"iconfont",attrs:{slot:"left"},on:{click:function(e){t.$router.go(-1)}},slot:"left"},[t._v("")]),t._v(" "),s("div",{attrs:{slot:"left"},slot:"left"},[s("p",[t._v(t._s(t.$route.query.id))]),t._v(" "),s("span",[t._v("匿名用户")])])]),t._v(" "),s("div",{ref:"main",staticClass:"main"},[s("ul",{ref:"listWrap"},t._l(t.chatListData[t.$route.query.id].list,function(e){return s("li",{class:{self:e.self}},[s("i",{staticClass:"iconfont",attrs:{slot:"left"},slot:"left"},[t._v("")]),t._v(" "),s("p",[t._v(t._s(e.message))])])}))]),t._v(" "),s("footer",[s("div",{staticClass:"input-wrap"},[s("mu-text-field",{attrs:{hintText:"输入您的消息",multiLine:"",rows:1,rowsMax:10},model:{value:t.messageText,callback:function(e){t.messageText=e},expression:"messageText"}}),t._v(" "),s("i",{staticClass:"iconfont",attrs:{slot:"left"},on:{click:t.sendMessage},slot:"left"},[t._v("")])],1),t._v(" "),s("div",{staticStyle:{display:"none"}},[t._v(t._s(t.changeM))])])],1)},staticRenderFns:[]};var x=s("VU/8")(T,$,!1,function(t){s("V87a")},"data-v-d141e41a",null).exports,y={data:function(){return{userid:""}},methods:{login:function(){var t=this;""!=this.userid.trim()?this.$store.commit("WSsend",{data:{method:"login",params:[this.userid]},callback:function(e){200==e.code&&"login"==e.method&&(localStorage.setItem("pub_key",e.result[0].pub_key),localStorage.setItem("sec_key",e.result[0].sec_key),sessionStorage.setItem("userid",t.userid),t.$router.replace("chatlist"))}}):this.$store.commit("showTopPopup","登录账号不能为空")}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-page"},[t._m(0),t._v(" "),s("footer",[s("mu-text-field",{attrs:{hintText:"请输入您的短信密码语句进行登录"},model:{value:t.userid,callback:function(e){t.userid=e},expression:"userid"}}),t._v(" "),s("mu-raised-button",{staticClass:"login-btn",attrs:{label:"授权登录",primary:""},nativeOn:{click:function(e){return t.login(e)}}}),t._v(" "),s("a",{staticClass:"register",attrs:{href:"#/register"}},[t._v("没有帐号？创建一个新的匿名帐号>>")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("h3",[this._v("密聊")]),this._v(" "),e("p",[this._v("一款基于区块链的顶级安全匿名聊天软件")])])}]};var U=s("VU/8")(y,S,!1,function(t){s("BRy7")},null,null).exports,E={data:function(){return{userid:"",loginUserid:"",toast:!1,timestamp:""}},mounted:function(){this.register()},computed:{registerUserid:function(){return this.$store.state.registerUserid}},methods:{copy:function(){var t=this,e=new m.a(".tag-read");e.on("success",function(s){t.toastMessage="复制成功",t.toast=!0,setTimeout(function(){t.toast=!1},1e3),e.destroy()}),e.on("error",function(s){t.toastMessage="该浏览器不支持自动复制",t.toast=!0,setTimeout(function(){t.toast=!1},1e3),e.destroy()})},register:function(){var t=nacl.box.keyPair(),e=nacl.util.encodeBase64(t.publicKey),s=nacl.util.encodeBase64(t.secretKey),a=(new Date).getTime();this.$store.commit("WSsend",{data:{method:"register",params:[a,e,s]}})},login:function(){var t=this;""!=this.loginUserid.trim()?(this.timestamp=(new Date).getTime(),this.$store.commit("WSsend",{data:{method:"login",params:[this.loginUserid,this.timestamp]},callback:function(e){200==e.code&&"login"==e.method&&e.serial==t.timestamp&&(localStorage.setItem("pub_key",e.result[0].pub_key),localStorage.setItem("sec_key",e.result[0].sec_key),sessionStorage.setItem("userid",t.loginUserid),t.$router.replace("chatlist"))}})):this.$store.commit("showTopPopup","登录账号不能为空")}}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register-page"},[s("mu-appbar",{staticClass:"header",attrs:{title:"新用户注册"}},[s("i",{staticClass:"iconfont",attrs:{slot:"left"},on:{click:function(e){t.$router.go(-1)}},slot:"left"},[t._v("")])]),t._v(" "),s("div",{staticClass:"main"},[s("p",{staticClass:"label"},[t._v("您的匿名账户已经生成，由以下12个字母构成")]),t._v(" "),s("div",{staticClass:"textarea-wrap"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.registerUserid,expression:"registerUserid"}],attrs:{disabled:""},domProps:{value:t.registerUserid},on:{input:function(e){e.target.composing||(t.registerUserid=e.target.value)}}}),t._v(" "),s("mu-raised-button",{staticClass:"tag-read",attrs:{label:"复制","data-clipboard-text":t.registerUserid},nativeOn:{click:function(e){return t.copy(e)}}})],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"login-container"},[s("mu-text-field",{attrs:{hintText:"请输入您的短信密码语句进行登录"},model:{value:t.loginUserid,callback:function(e){t.loginUserid=e},expression:"loginUserid"}}),t._v(" "),s("mu-raised-button",{staticClass:"login-btn",attrs:{label:"登录",primary:""},nativeOn:{click:function(e){return t.login(e)}}})],1),t._v(" "),t.toast?s("mu-toast",{staticClass:"tipbox",attrs:{message:t.toastMessage}}):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"tip"},[this._v("备注："),e("br"),this._v("请务必保存账号密码短句.如果丢失, 将无法找回 ！"),e("br"),this._v("请务必不要泄露给第三方，否则您的信息可能被泄露！")])}]};var I=s("VU/8")(E,D,!1,function(t){s("DRGz")},"data-v-588693ee",null).exports,L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"specification-page"},[s("mu-appbar",{staticClass:"header",attrs:{title:"会员费用详情"}},[s("i",{staticClass:"iconfont",attrs:{slot:"left"},on:{click:function(e){t.$router.go(-1)}},slot:"left"},[t._v("")])]),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("p",[this._v("\n            备注：您充值的sac，一部分是以太坊公网收取的，一部分是我们的运营开发费用。"),e("br"),e("br"),this._v("\n            因为我们第一个版本，使用的是以太坊的公链，以太坊需要收取一定成本的费用同时我们的运营和开发人员，也需要一定的费用\n            我们后期将在eos上发行新的公链，我们自己的公链，也在研发当中我们将持续地竭诚为您的信息安全服务\n        ")])])}]};var M=s("VU/8")(null,L,!1,function(t){s("AliO")},"data-v-c2310080",null).exports;a.default.use(o.a);var P=new o.a({routes:[{path:"/",name:"Index",component:l,redirect:"chatlist",meta:{isLogin:!0},children:[{path:"wallet",name:"wallet",component:h},{path:"chatlist",name:"chatlist",component:f,meta:{isLogin:!0}},{path:"setting",name:"setting",component:b},{path:"addchat",name:"addchat",component:C}]},{path:"/chatin",component:x,meta:{isLogin:!0}},{path:"/login",component:U},{path:"/register",component:I},{path:"/specification",component:M}]});P.beforeEach(function(t,e,s){t.meta.isLogin?sessionStorage.getItem("userid")?s(!0):s({path:"login"}):s(!0)});var W=P,B=s("mvHQ"),O=s.n(B),F=s("NYxO");a.default.use(F.a);var V=new F.a.Store({state:{ws:null,chatUserList:{},isShowTopPopup:!1,isShowAlert:!1,alertText:"",tipText:"",userInfo:{userid:""},loading:!0,changeM:"",registerUserid:"",minute5logout:!1,timer:null},mutations:{WSconnect:function(t,e){var s=this;if(!e)return console.error("websocket连接地址有误"),t.tipText="服务器连接地址有误",t.isShowTopPopup=!0,void setTimeout(function(){t.isShowTopPopup=!1},2e3);"WebSocket"in window?(t.ws=new WebSocket(e),t.ws.onopen=function(){console.log("连接成功"),t.loading=!1,sessionStorage.getItem("userid")&&s.commit("WSsend",{data:{method:"login",params:[sessionStorage.getItem("userid")]}})},t.ws.onmessage=function(e){t.timer&&clearTimeout(t.timer),t.minute5logout&&(t.timer=setTimeout(function(){t.minute5logout=!1;var e=sessionStorage.getItem("userid");s.commit("WSsend",{data:{method:"logout",params:[e]}})},3e5)),t.loading=!1;var a,i,n,o,r,c=JSON.parse(e.data);if(console.log(c),3001!=c.code){if(200==c.code)switch(c.method){case"pushMessage":var l=(a=c.result.msg_data,i=c.result.msg_nonce,n=c.result.msg_pubkey,o=localStorage.getItem("sec_key"),r=nacl.box.open(nacl.util.decodeBase64(a),nacl.util.decodeBase64(i),nacl.util.decodeBase64(n),nacl.util.decodeBase64(o)),nacl.util.encodeUTF8(r));s.commit("addChatUser",{userid:c.result.from_user_id,list:[{message:l,self:!1}],pk:c.result.msg_pubkey});break;case"logout":localStorage.removeItem("pub_key"),localStorage.removeItem("sec_key"),sessionStorage.removeItem("userid"),W.replace("login");break;case"register":t.registerUserid=c.result;break;case"login":localStorage.setItem("pub_key",c.result[0].pub_key),localStorage.setItem("sec_key",c.result[0].sec_key)}}else s.commit("showTopPopup",c.result)},t.ws.onclose=function(){console.log("连接已关闭"),s.commit("showTopPopup","连接已关闭"),t.loading=!0,s.commit("WSconnect","ws://13.231.69.243:3000/")}):alert("当前环境暂不支持聊天")},WSsend:function(t,e){switch(t.ws.readyState){case 0:setTimeout(function(){t.ws.send(O()(e.data)),e.callback&&t.ws.addEventListener("message",function s(a){var i=a;e.callback(JSON.parse(i.data)),t.ws.removeEventListener("message",s)})},1e3);break;case 1:if(t.ws.send(O()(e.data)),!e.callback)return;t.ws.addEventListener("message",function s(a){var i=a;e.callback(JSON.parse(i.data)),t.ws.removeEventListener("message",s)});break;case 2:this.commit("showTopPopup","连接尚未连接正在进行关闭建立");break;case 3:this.commit("showTopPopup","连接已经关闭或者连接不能打开")}},addChatUser:function(t,e){""!=e.list[0].message.trim()&&(t.changeM=(new Date).getTime(),t.chatUserList.hasOwnProperty(e.userid)?(t.chatUserList[e.userid].list.push(e.list[0]),t.chatUserList[e.userid].pk=e.pk):t.chatUserList[e.userid]=e)},showTopPopup:function(t,e){t.tipText=e,t.isShowTopPopup=!0,setTimeout(function(){t.isShowTopPopup=!1},1e3)},showAlert:function(t,e){t.alertText=e,t.isShowAlert=!0}}}),R=s("u64Q"),j=s.n(R);s("E51W"),s("hMcO");a.default.use(j.a),V.commit("WSconnect","ws://13.231.69.243:3000/"),a.default.config.productionTip=!1,new a.default({el:"#app",router:W,store:V,components:{App:n},template:"<App/>"})},V87a:function(t,e){},puqK:function(t,e){}},["NHnr"]);